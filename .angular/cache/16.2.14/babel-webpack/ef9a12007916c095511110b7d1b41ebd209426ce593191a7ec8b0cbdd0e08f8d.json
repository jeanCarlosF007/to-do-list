{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport { first } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ListChoresComponent {\n  constructor(http) {\n    this.http = http;\n    this.apiKey = `a1623aa7aafd49449368d44fc1324461`;\n    this.apiUrl = `https://crudcrud.com/api/${this.apiKey}/chores`;\n    this.editionForm = new FormGroup({\n      title: new FormControl(''),\n      category: new FormControl(''),\n      time: new FormControl('')\n    });\n  }\n  getChores() {\n    this.http.get(this.apiUrl).pipe(first()).subscribe({\n      next: res => {\n        this.chores = res;\n        console.log(res);\n      },\n      error: err => {\n        console.log(err);\n      },\n      complete: () => {}\n    });\n  }\n  deleteChore(id) {\n    const url = `${this.apiUrl}/${id}`;\n    this.http.delete(url).pipe(first()).subscribe({\n      complete: () => {\n        this.getChores();\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n    alert(\"Tarefa deletada com sucesso!\");\n  }\n  getDataToEditForm(id) {\n    this.http.get(`${this.apiUrl}/${id}`).pipe(first()).subscribe({\n      next: res => {\n        const chore = {\n          _id: res._id,\n          title: res.title,\n          category: res.category,\n          time: res.time\n        };\n        this.editionForm.patchValue(chore);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n    const chore = this.editionForm.getRawValue();\n    console.log(chore._id);\n  }\n  updateChore(id) {\n    const chore = this.editionForm.getRawValue();\n    this.http.put(`${this.apiUrl}/${id}`, chore).pipe(first()).subscribe({\n      next: response => {\n        console.log(response);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n    alert(\"Tarefa atualizada com sucesso!\");\n  }\n  ngOnInit() {\n    // this.getChores();\n  }\n  static #_ = this.ɵfac = function ListChoresComponent_Factory(t) {\n    return new (t || ListChoresComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListChoresComponent,\n    selectors: [[\"app-list-chores\"]],\n    decls: 0,\n    vars: 0,\n    template: function ListChoresComponent_Template(rf, ctx) {},\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["FormControl","FormGroup","first","ListChoresComponent","constructor","http","apiKey","apiUrl","editionForm","title","category","time","getChores","get","pipe","subscribe","next","res","chores","console","log","error","err","complete","deleteChore","id","url","delete","alert","getDataToEditForm","chore","_id","patchValue","getRawValue","updateChore","put","response","ngOnInit","_","i0","ɵɵdirectiveInject","i1","HttpClient","_2","selectors","decls","vars","template","ListChoresComponent_Template","rf","ctx","styles"],"sources":["/home/jean/Documents/ADA/modulo5-to-do/src/app/components/list-chores/list-chores.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { first } from 'rxjs';\nimport { IChore } from 'src/app/models/chores-list.model';\n\n@Component({\n  selector: 'app-list-chores',\n  templateUrl: './list-chores.component.html',\n  styleUrls: ['./list-chores.component.css']\n})\nexport class ListChoresComponent implements OnInit {\n\n  apiKey = `a1623aa7aafd49449368d44fc1324461`;\n  apiUrl = `https://crudcrud.com/api/${this.apiKey}/chores`;\n\n  constructor(private http: HttpClient) { }\n\n  chores?: IChore[];\n\n  private getChores(): void {\n    this.http.get<IChore[]>(this.apiUrl)\n      .pipe(first())\n      .subscribe({\n        next: (res) => {\n          this.chores = res;\n          console.log(res);\n        },\n        error: (err) => { console.log(err); },\n        complete: () => { }\n      })\n  }\n\n  deleteChore(id: string): void {\n    const url = `${this.apiUrl}/${id}`;\n    this.http.delete(url)\n      .pipe(first())\n      .subscribe({\n        complete: () => {\n          this.getChores();\n        },\n        error: (err) => {\n          console.log(err);\n        }\n      })\n    alert(\"Tarefa deletada com sucesso!\");\n  }\n\n  editionForm: FormGroup = new FormGroup({\n    title: new FormControl(''),\n    category: new FormControl(''),\n    time: new FormControl('')\n  });\n\n  getDataToEditForm(id: string) {\n    this.http.get<IChore>(`${this.apiUrl}/${id}`)\n      .pipe(first())\n      .subscribe({\n        next: (res) => {\n          const chore = {\n            _id: res._id,\n            title: res.title,\n            category: res.category,\n            time: res.time\n          };\n          this.editionForm.patchValue(chore);\n        },\n        error: (err) => {\n          console.log(err);\n        }\n      })\n    const chore: IChore = this.editionForm.getRawValue();\n    console.log(chore._id)\n  }\n\n  updateChore(id: string): void {\n    const chore: IChore = this.editionForm.getRawValue();\n    this.http.put(`${this.apiUrl}/${id}`, chore)\n      .pipe(first())\n      .subscribe({\n        next: (response) => {\n          console.log(response);\n        },\n        error: (err) => {\n          console.log(err);\n        }\n      });\n    alert(\"Tarefa atualizada com sucesso!\");\n  }\n\n  ngOnInit(): void {\n    // this.getChores();\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}